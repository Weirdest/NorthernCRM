<!DOCTYPE html>

<html>

<head th:insert="fragments/fragments.html :: head('Quickbooks')"></head>

<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">

  <!-- Main -->
  <div id="main">
    <section th:replace="fragments/fragments.html :: alert_box"></section>
    <div class="inner">

      <!-- Header -->
      <header th:replace="fragments/fragments.html :: page_header"></header>

      <section>
        <!-- Insert code here -->

        <header class="main">
          <h1>QuickBooks Settings</h1>
        </header>

        <!-- Connect To QuickBooks Button -->
        <b>Connect To QuickBooks</b><br />
        <a class="imgLink" th:onclick="'launchPopup(\'qb/connectToQuickbooks\');'" href="#">
          <img
                  style="height: 40px"
                  src="../public/images/C2QB_white_btn_lg_default.png"
                  th:src="@{/images/C2QB_white_btn_lg_default.png}"
          />
        </a>

      </section>

    </div>
  </div>

  <!-- Sidebar -->
  <div th:replace="fragments/fragments.html :: sidebar"></div>

</div>

<!-- Scripts -->
<div th:replace="fragments/fragments.html :: scripts"></div>

<script>
  if(window.opener) {
    const params = new URLSearchParams(window.location.search);

    if (params.toString().length > 0) {
      window.opener.location.href = '/qb?' + params;
    } else {
      window.opener.location.href = '/qb';
    }

    window.close()
  }
  function launchPopup(path) {
    let parameters = "location=1,width=800,height=650";
    parameters += ",left=" + (screen.width - 800) / 2 + ",top=" + (screen.height - 650) / 2;
    // Launch Popup
    window.open(path, 'connectPopup', parameters);
  }
</script>

</body>
</html>